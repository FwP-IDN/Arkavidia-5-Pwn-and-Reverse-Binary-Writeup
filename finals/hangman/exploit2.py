from pwn import *

r = None
pp = None
kamus = [None] * 25

WORDSIZE = 25

def init():
    global r, pp
    # r = remote('167.205.35.176', 31004)
    r = remote('3.1.85.51', 10004)
    # r = process('./hangman')
    pp = process('./random')
    r.sendlineafter(':', 'fwp')

def dead():
    global r, pp
    r.close()
    pp.close()    

def tebak_words():
    global r, pp
    init()
    while(kamus.count(None) > 0):
        r.sendlineafter('[+] Your choice: ', '1')
        for i in range(5):
            r.sendline(';')
        r.recvuntil('''/ \\
    || ''')
        # r.interactive()
        word = ''.join(r.recvline()[:-1].split())
        print word
        pp.sendline('')
        kantil = pp.recvline()
        print kantil
        idx = int(kantil) % WORDSIZE
        if kamus[idx] != None and kamus[idx] != word:
            log.info('error cuk %s %s' % (word, kamus[idx]))
            return
        kamus[idx] = word
        print idx, word
        print kamus
        r.sendline('')
    dead()
    print kamus
    r.interactive()


if __name__ == '__main__':
    tebak_words()
